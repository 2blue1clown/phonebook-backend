(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,n,t){"use strict";t.r(n);var c=t(2),o=t(15),a=t.n(o),r=t(6),i=t(3),u=t(0);function l(e){var n=e.name,t=e.number,c=e.handleClick;return Object(u.jsxs)("div",{children:[Object(u.jsxs)("p",{children:[n," ",t]},n),Object(u.jsx)("button",{onClick:c,children:"Remove"})]})}function s(e){var n=e.submitCallback,t=e.handleNameChange,c=e.handleNumberChange,o=e.newName,a=e.newNumber;return Object(u.jsx)("div",{children:Object(u.jsxs)("form",{onSubmit:n,children:[Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("input",{value:o,onChange:t})]}),Object(u.jsxs)("div",{children:["number: ",Object(u.jsx)("input",{value:a,onChange:c})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})})}function b(e){var n=e.filter,t=e.handleFilterChange;return Object(u.jsxs)("div",{children:["Search: ",Object(u.jsx)("input",{value:n,onChange:t})]})}var d=t(4),h=t.n(d),j="/api/contacts",f=function(){return h.a.get(j)},m=function(e){return h.a.post(j,e)},O=function(e,n){return h.a.put("".concat(j,"/").concat(e),n)},g=function(e){return h.a.delete("".concat(j,"/").concat(e))},p=function(e){var n=Object(c.useState)([]),t=Object(i.a)(n,2),o=t[0],a=t[1],d=Object(c.useState)("name"),h=Object(i.a)(d,2),j=h[0],p=h[1],v=Object(c.useState)("number"),x=Object(i.a)(v,2),C=x[0],w=x[1],k=Object(c.useState)(""),N=Object(i.a)(k,2),S=N[0],F=N[1],y=Object(c.useState)(""),P=Object(i.a)(y,2),D=P[0],T=P[1];Object(c.useEffect)((function(){console.log("effect"),f().then((function(e){console.log("promise fulfilled"),a(e.data)})).catch((function(e){console.log(e.response.data)}))}),[]);var B=o.filter((function(e){return e.name.includes(S)}));return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)("p",{children:D}),Object(u.jsx)("h3",{children:"Search"}),Object(u.jsx)(b,{filter:S,handleFilterChange:function(e){F(e.target.value)}}),Object(u.jsx)("h3",{children:"PersonForm"}),Object(u.jsx)(s,{submitCallback:function(e){e.preventDefault();var n=o.some((function(e){return e.name===j})),t=o.find((function(e){return e.name===j})),c=Object(r.a)(Object(r.a)({},t),{},{number:C});if(n)window.confirm("".concat(j," is already in the phonebook, replace the old number with a new one?")),O(t.id,c).then((function(e){console.log(e),a(o.map((function(n){return n.id!==t.id?n:e.data}))),p(""),w("")})).catch((function(e){console.log(e)}));else{var i={name:j,number:C};console.log("posting"),m(i).then((function(e){a(o.concat(e.data))})).catch((function(e){console.log(e.response.data.error),T(e.response.data.error)})),p(""),w("")}},newName:j,newNumber:C,handleNameChange:function(e){p(e.target.value)},handleNumberChange:function(e){w(e.target.value)}}),Object(u.jsx)("h2",{children:"Numbers"}),B.map((function(e){return Object(u.jsx)(l,{name:e.name,number:e.number,handleClick:(n=e.name,function(){if(window.confirm("Delete ".concat(n," from the phonebook?"))){var e=o.find((function(e){return e.name===n}));console.log("removing ".concat(e.name)),g(e.id).then((function(n){a(o.filter((function(n){return n.id!==e.id})))})).catch((function(n){alert('The person "'.concat(e.name," was already deleted from the server")),a(o.filter((function(n){return n.id!==e.id}))),console.log(n.response.data.error)}))}})},e.name);var n}))]})},v=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,40)).then((function(n){var t=n.getCLS,c=n.getFID,o=n.getFCP,a=n.getLCP,r=n.getTTFB;t(e),c(e),o(e),a(e),r(e)}))};a.a.render(Object(u.jsx)(p,{}),document.getElementById("root")),v()}},[[39,1,2]]]);
//# sourceMappingURL=main.48a442e8.chunk.js.map