(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{41:function(e,n,t){"use strict";t.r(n);var c=t(2),a=t(16),r=t.n(a),o=t(17),i=t(5),u=t(0);function l(e){var n=e.name,t=e.number,c=e.handleClick;return Object(u.jsxs)("div",{children:[Object(u.jsxs)("p",{children:[n," ",t]},n),Object(u.jsx)("button",{onClick:c,children:"Remove"})]})}function s(e){var n=e.submitCallback,t=e.handleNameChange,c=e.handleNumberChange,a=e.newName,r=e.newNumber;return Object(u.jsx)("div",{children:Object(u.jsxs)("form",{onSubmit:n,children:[Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("input",{value:a,onChange:t})]}),Object(u.jsxs)("div",{children:["number: ",Object(u.jsx)("input",{value:r,onChange:c})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})})}function b(e){var n=e.filter,t=e.handleFilterChange;return Object(u.jsxs)("div",{children:["Search: ",Object(u.jsx)("input",{value:n,onChange:t})]})}var d=t(4),h=t.n(d),j="/api/contacts",f=function(){return h.a.get(j)},m=function(e){return h.a.post(j,e)},O=function(e,n){return h.a.put("".concat(j).concat(e),n)},v=function(e){return h.a.delete("".concat(j,"/").concat(e))},g=function(e){var n=Object(c.useState)([]),t=Object(i.a)(n,2),a=t[0],r=t[1],d=Object(c.useState)("name"),h=Object(i.a)(d,2),j=h[0],g=h[1],p=Object(c.useState)("number"),x=Object(i.a)(p,2),C=x[0],w=x[1],k=Object(c.useState)(""),N=Object(i.a)(k,2),S=N[0],F=N[1];Object(c.useEffect)((function(){console.log("effect"),f().then((function(e){console.log("promise fulfilled"),r(e.data)}))}),[]);console.log({persons:a,filter:S});var y=a.filter((function(e){return e.name.includes(S)}));return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)("h3",{children:"Search"}),Object(u.jsx)(b,{filter:S,handleFilterChange:function(e){F(e.target.value)}}),Object(u.jsx)("h3",{children:"PersonForm"}),Object(u.jsx)(s,{submitCallback:function(e){if(e.preventDefault(),a.map((function(e){return e.name})).includes(j)){window.confirm("".concat(j," is already in the phonebook, replace the old number with a new one?"));var n=Object(o.a)(a),t=n.findIndex((function(e){return e.name===j})),c=n[t].id;console.log("updating ".concat(c)),n[t].number=C,O(c,n[t]).then((function(e){r(n),g(""),w("")}))}else{var i={name:j,number:C};console.log("posting"),m(i).then((function(e){r(a.concat(e.data))})),g(""),w("")}},newName:j,newNumber:C,handleNameChange:function(e){g(e.target.value)},handleNumberChange:function(e){w(e.target.value)}}),Object(u.jsx)("h2",{children:"Numbers"}),y.map((function(e){return Object(u.jsx)(l,{name:e.name,number:e.number,handleClick:(n=e.name,function(){if(window.confirm("Delete ".concat(n," from the phonebook?"))){var e=a.find((function(e){return e.name===n}));console.log("removing ".concat(e.name)),v(e.id).then((function(n){r(a.filter((function(n){return n.id!==e.id})))})).catch((function(n){alert('The person "'.concat(e.name," was already deleted from the server")),r(a.filter((function(n){return n.id!==e.id})))}))}})},e.name);var n}))]})},p=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,42)).then((function(n){var t=n.getCLS,c=n.getFID,a=n.getFCP,r=n.getLCP,o=n.getTTFB;t(e),c(e),a(e),r(e),o(e)}))};r.a.render(Object(u.jsx)(g,{}),document.getElementById("root")),p()}},[[41,1,2]]]);
//# sourceMappingURL=main.caf02d14.chunk.js.map